---
import { getLangFromUrl, useTranslations as useOldTranslations } from '../i18n/utils';
import { interpolate, useTranslations } from '@shared/lib/i18n';
import LinkedInIcon from '@assets/icons/LinkedIn.astro';
import MailIcon from '@assets/icons/Mail.astro';
import { Avatar, SocialPill } from '@shared/ui';
import GitHubIcon from '@assets/icons/GitHub.astro';
import { Language } from '@shared/config/i18n/languages';

const lang = getLangFromUrl(new URL(Astro.request.url));
const t = useOldTranslations(lang);

// Use the new FSD i18n system for avatar translations
const fsdLang = lang === 'en' ? Language.ENGLISH : Language.SPANISH;
const tFsd = useTranslations(fsdLang);

// Prepare avatar alt text with i18n
const avatarAltTemplate = tFsd('avatar.alt');
const avatarAlt = interpolate(avatarAltTemplate, {
	name: 'Juan David Sandoval Salvador',
});
---

<div class="max-w-3xl">
	<div class="flex gap-4 mb-4 items-center">
		<Avatar src="/profile/perfil.webp" alt={avatarAlt} size="md" />
		<h1 class="text-4xl font-bold tracking-tight text-gray-800 sm:text-5xl dark:text-white">
			{t('hero.intro')}
		</h1>
	</div>
	<p
		class="mt-6 text-xl text-gray-800 dark:[&>strong]:text-yellow-200 [&>strong]:text-yellow-500 [&>strong]:font-semibold dark:text-gray-300"
		set:html={t('hero.description')}
	/>
	<nav class="flex flex-wrap gap-4 mt-8">
		<SocialPill href="mailto:devsandoval.me@gmail.com">
			<MailIcon class="size-4" />
			Cont√°ctame
		</SocialPill>
		<SocialPill href="https://www.linkedin.com/in/devsandoval/">
			<LinkedInIcon class="size-4" />
			LinkedIn
		</SocialPill>
		<SocialPill href="https://github.com/sandovaldavid">
			<GitHubIcon class="size-4" />
			GitHub
		</SocialPill>
	</nav>
</div>
