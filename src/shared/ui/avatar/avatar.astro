---
import { Image } from 'astro:assets';

interface Props {
	src: string;
	alt: string;
	size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
	class?: string;
}

const { src, alt, size = 'md', class: className } = Astro.props;

// Size mappings
const sizeMap = {
	xs: { dimension: 32, class: 'size-8' },
	sm: { dimension: 48, class: 'size-12' },
	md: { dimension: 96, class: 'size-24' },
	lg: { dimension: 192, class: 'size-48' },
	xl: { dimension: 256, class: 'size-64' },
} as const;

const { dimension, class: sizeClass } = sizeMap[size];

// Check if image is local for optimization
const isLocalImage = src.startsWith('/') || src.startsWith('./') || src.startsWith('../');
---

{
	isLocalImage ? (
		<Image
			src={src}
			alt={alt}
			width={dimension}
			height={dimension}
			class:list={[
				'rounded-full object-cover aspect-square',
				sizeClass,
				className,
			]}
		/>
	) : (
		<img
			src={src}
			alt={alt}
			width={dimension}
			height={dimension}
			class:list={[
				'rounded-full object-cover aspect-square',
				sizeClass,
				className,
			]}
		/>
	)
}
