---
import { Image } from 'astro:assets';

interface Props {
	src: string;
	alt?: string;
	href?: string;
	class?: string;
}

const { src, alt = '', href, class: className } = Astro.props;

// Check if image is local for optimization
const isLocalImage = src.startsWith('/') || src.startsWith('./') || src.startsWith('../');
---

<a
	{href}
	target="_blank"
	rel="noopener noreferrer"
	role="link"
	class:list={[
		'relative flex items-center justify-center size-28 rounded-full',
		'bg-gray-200/30 dark:bg-gray-500/20',
		'transition-all duration-300 ease-in-out',
		'group hover:bg-gray-200/50 dark:hover:bg-gray-500/40 hover:shadow-lg',
		'focus:outline-none focus-visible:outline-none',
		'focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2',
		className,
	]}
>
	{
		isLocalImage ? (
			<Image
				src={src}
				alt={alt}
				width={96}
				height={96}
				class="size-24 aspect-square transition-transform duration-300 ease-in-out group-hover:scale-110"
			/>
		) : (
			<img
				src={src}
				alt={alt}
				width="96"
				height="96"
				class="size-24 aspect-square transition-transform duration-300 ease-in-out group-hover:scale-110"
			/>
		)
	}
	
	<!-- Tooltip on hover -->
	<span
		class="absolute bottom-0 mb-20 hidden px-2 py-1 text-sm text-white bg-gray-800 rounded-md opacity-0 group-hover:block group-hover:opacity-100 transition-opacity duration-300 text-center w-52 pointer-events-none"
		aria-hidden="true"
	>
		{alt}
	</span>
</a>
